<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>単語リスト2025</title>
    <style>
        /* ページ全体の基本スタイル */
        body {
            font-family: 'Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        /* コンテンツのコンテナ */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        /* タイトル */
        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        /* リスト選択エリア */
        .list-selector {
            text-align: center;
            margin-bottom: 20px;
        }
        .list-selector label {
            margin-right: 10px;
            font-weight: bold;
        }
        .list-selector select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
        }
        /* 操作ボタンのエリア */
        .controls {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        /* ボタンのスタイル */
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #2980b9;
        }
        button.print-btn {
            background-color: #2ecc71;
        }
        button.print-btn:hover {
            background-color: #27ae60;
        }
        /* 単語リストのテーブル */
        .word-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .word-table th, .word-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            vertical-align: top; /* セルの内容を上揃えに */
        }
        .word-table th {
            background-color: #eaf2f8;
            font-weight: bold;
        }
        .word-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .word-table td.english-word {
            font-weight: 500;
            font-size: 1.1em;
        }
        .word-table td.answer-column {
            /* 解答欄用のスタイル（現在は空） */
        }
        .word-table td.japanese-answer {
            transition: color 0.3s;
        }
        /* 印刷時専用のスタイル */
        @media print {
            body {
                background-color: #fff;
                padding: 0;
                font-size: 12pt;
            }
            .container {
                box-shadow: none;
                border: none;
                padding: 0;
                max-width: 100%;
            }
            .list-selector, .controls {
                display: none;
            }
            h1 {
                font-size: 20pt;
            }
            .word-table td.japanese-answer.answer-hidden {
                color: transparent !important;
                 /* 印刷時も確実に隠すために important を指定 */
            }
            .word-table td.answer-column {
                /* 印刷時に書き込みスペースを確保 */
                height: 2.5em; 
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="list-title">単語リスト2025</h1>

        <div class="list-selector">
            <label for="list-select">Choose a List:</label>
            <select id="list-select" onchange="loadWordList()">
                <!-- JavaScriptでオプションを生成します -->
            </select>
        </div>
        
        <div class="controls">
            <button onclick="toggleAnswers(false)">Hide Japanese</button>
            <button onclick="toggleAnswers(true)">Show Japanese</button>
            <button class="print-btn" onclick="printPage()">Print This Page</button>
        </div>

        <table class="word-table">
            <thead>
                <tr>
                    <th style="width: 5%;">No.</th>
                    <th style="width: 35%;">English</th>
                    <th style="width: 30%;">Your Answer</th>
                    <th style="width: 30%;">Japanese</th>
                </tr>
            </thead>
            <tbody id="word-list-body">
                <!-- 単語リストはJavaScriptによってここに生成されます -->
            </tbody>
        </table>
    </div>

    <script>
        const listTitle = document.getElementById('list-title');
        const listSelect = document.getElementById('list-select');
        const wordListBody = document.getElementById('word-list-body');
        const totalLists = 10; // 将来的に作成するリストの総数

        // ページが読み込まれたときにドロップダウンと最初のリストを初期化
        document.addEventListener('DOMContentLoaded', function() {
            // ドロップダウンメニューを生成
            for (let i = 1; i <= totalLists; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `List ${i}`;
                listSelect.appendChild(option);
            }
            // 最初のリストを読み込む
            loadWordList();
        });

        // 選択された単語リストをJSONファイルから読み込む関数
        async function loadWordList() {
            const listNumber = listSelect.value;
            const filePath = `vocab/list${listNumber}.json`;
            
            try {
                const response = await fetch(filePath);
                if (!response.ok) {
                    throw new Error('ファイルの読み込みに失敗しました。');
                }
                const words = await response.json();
                
                updateTable(words);
                listTitle.textContent = `Word List ${String(listNumber).padStart(2, '0')}`;
                
                toggleAnswers(false);

            } catch (error) {
                console.error('Error loading word list:', error);
                // ★変更点: エラーメッセージのcolspanを4に更新
                wordListBody.innerHTML = `<tr><td colspan="4" style="text-align:center; color: red;">Failed to load word list (${filePath}). Please make sure the file exists.</td></tr>`;
                listTitle.textContent = 'Error';
            }
        }

        // テーブルの内容をデータで更新する関数
        function updateTable(words) {
            let tableHtml = '';
            words.forEach((word, index) => {
                // ★変更点: 解答用の空のセル<td>を追加
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td class="english-word">${word.english}</td>
                        <td class="answer-column"></td>
                        <td class="japanese-answer">${word.japanese}</td>
                    </tr>
                `;
                tableHtml += row;
            });
            wordListBody.innerHTML = tableHtml;
        }

        // 答えの表示・非表示を切り替える関数
        function toggleAnswers(show) {
            const answers = document.querySelectorAll('.japanese-answer');
            answers.forEach(td => {
                if (show) {
                    td.style.color = '#333';
                    td.classList.remove('answer-hidden');
                } else {
                    td.style.color = 'transparent';
                    td.classList.add('answer-hidden');
                }
            });
        }

        // 印刷機能を呼び出す関数
        function printPage() {
            window.print();
        }
    </script>

</body>
</html>
